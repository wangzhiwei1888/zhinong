<template name="solutionNew">
<div class="article-bg">
  <div class="solution">

    <div class="tt1">Local Solutions</div>

    {{#autoForm collection="solution"  id="solutionNewForm" type="insert"}}
      <fieldset>
        <div class="cropName solution-c">
          <div class="" style="text-align: center; font-size: 32px;">Beat Solutions from Agrochemicals Company</div>
          <div id="name" class="pub-box" style="display: -webkit-inline-box;">
            <div style="width: 50%;">
              {{> afQuickField name="solution1"}}
            </div>
            <div style="width: 50%;">
              {{> afQuickField name="solution2"}}
            </div>
          </div>
          <div class=""  style="text-align: center; font-size: 32px; padding-top: 30px; padding-bottom: 50px;">Beat Solutions from Agrochemicals Farmers</div>
          <div id="name2" class="pub-box" style="display: -webkit-inline-box;">
            <div style="width: 50%;">
              {{> afQuickField name="solution3"}}
            </div>
            <div style="width: 50%;">
              {{> afQuickField name="solution4"}}
            </div>
          </div>
        </div>
      </fieldset>
      <div class="btn-box">
        <button type="submit" class="btn btn-default btn-login" id="cerateorgann">
          Next Step
        </button>
      </div>
    {{/autoForm}}
  </div>
</div>

<script type="text/javascript">

  function setImagePreviews(clickId,id) {

    var num = Math.random();
    var docObj = document.getElementById(clickId);

    var dd = document.getElementById(id);

    var fileList = docObj.files;

    if(fileList.length !=3 ){
        alert("选择3张图片！");
        // for IE, Opera, Safari, Chrome
        if(docObj.outerHTML){

          docObj.outerHTML = docObj.outerHTML;
        }
        else{
          // FF(包括3.5)
          docObj.value = '';
        }
        return;
    }
    for (var i = 0; i < fileList.length; i++) {

        dd.innerHTML += '<span class="img-li"><img id="img'+num+i+'" /></span>'

        var imgObjPreview = document.getElementById("img"+num+i);

        if (docObj.files && docObj.files[i]) {



            //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式

            imgObjPreview.src = window.URL.createObjectURL(docObj.files[i]);

        }

        else {

            //IE下，使用滤镜

            docObj.select();

            var imgSrc = document.selection.createRange().text;

            alert(imgSrc)

            var localImagId = document.getElementById("img"+num + i);

            //必须设置初始大小

            // localImagId.style.width = "150px";

            // localImagId.style.height = "150px";

            //图片异常的捕捉，防止用户修改后缀来伪造图片

            try {

                localImagId.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";

                localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;

            }

            catch (e) {

                alert("您上传的图片格式不正确，请重新选择!");

                return false;

            }

            imgObjPreview.style.display = 'none';

            document.selection.empty();

        }

    }



    return true;

  }


</script>
  <!-- {{> imgUploader}} -->
</template>
